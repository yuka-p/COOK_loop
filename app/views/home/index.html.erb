<div class="max-w-xl mx-auto mt-6 px-4 sm:px-0">
  <!-- ▼ 今日の献立（未調理分） -->
  <% if @meal_items.present? %>

  <!-- トグルボタン -->
    <div class="flex justify-end mb-6">
      <button
        type="button"
        id="toggle-meal-plan"
        class="btn btn-sm btn-outline"
      >
      献立を非表示
      </button>
    </div>

    <div id="meal-plan-area" class="max-w-xl mx-auto px-4 sm:px-0">

      <div class="card bg-base-100 shadow-lg">
        <div class="card-body">

          <% @meal_items
               .sort_by { |genre, _| MyMenu.genres[genre] }
               .each do |genre, items| %>

            <% next if items.blank? %>
            <div class="mb-8">

                <!-- ジャンル見出し -->
              <h3 class="text-sm font-semibold mb-3
                        border-l-4
                        px-4 py-1.5 rounded-md tracking-wide
                        <%= genre_heading_class(genre) %>">
                <%= MyMenu.genres_i18n[genre] %>
              </h3>

              <!-- 献立リスト -->
                <ul class="space-y-1">
                  <% items.each do |meal_item| %>
                    <li
                      class="flex items-center gap-3 px-3 py-2 rounded-lg
                             hover:bg-base-200 transition"
                    >
                      <%= check_box_tag "meal_item_ids[]",
                                        meal_item.id,
                                        false,
                                        class: "checkbox checkbox-primary checkbox-sm" %>

                      <div class="flex-1 text-sm">
                        <p class="font-medium">
                          <%= meal_item.my_menu.title %>
                        </p>
                      </div>
                    </li>
                  <% end %>
                </ul>
              </div>
            <% end %>

          <!-- ボタン -->
            <div class="flex justify-end gap-3 mt-6">
              <%= button_tag "作成完了",
                    type: :submit,
                    name: "commit_action",
                    value: "mark_as_cooked",
                    class: "btn btn-primary" %>

              <%= button_tag "献立から削除",
                    type: :submit,
                    name: "commit_action",
                    value: "remove_from_plan",
                    class: "btn btn-outline btn-error" %>
            </div>

        </div>
      </div>
    </div>

  <% end %>

  <!-- ▼ メニューリンク -->
  <div class="grid gap-4 mt-10">

    <%= link_to my_menus_path,
        class: "card bg-base-100 shadow hover:shadow-lg transition rounded-xl p-5" do %>
      <div class="flex items-center gap-3">
        <div class="badge badge-primary p-3 text-white">📘</div>
        <span class="text-lg font-semibold">マイメニュー一覧を見る</span>
      </div>
    <% end %>

    <%= link_to master_menus_path,
        class: "card bg-base-100 shadow hover:shadow-lg transition rounded-xl p-5" do %>
      <div class="flex items-center gap-3">
        <div class="badge badge-secondary p-3 text-white">🍳</div>
        <span class="text-lg font-semibold">定番メニューから登録する</span>
      </div>
    <% end %>

    <%= link_to new_meal_plan_path,
        class: "card bg-base-100 shadow hover:shadow-lg transition rounded-xl p-5" do %>
      <div class="flex items-center gap-3">
        <div class="badge badge-accent p-3 text-white">📅</div>
        <span class="text-lg font-semibold">献立を作成する</span>
      </div>
    <% end %>

    <%= link_to "#",
        class: "card bg-base-100 shadow hover:shadow-lg transition rounded-xl p-5" do %>
      <div class="flex items-center gap-3">
        <div class="badge badge-info p-3 text-white">🛒</div>
        <span class="text-lg font-semibold">買い物リストを見る</span>
      </div>
    <% end %>

  </div>
</div>
