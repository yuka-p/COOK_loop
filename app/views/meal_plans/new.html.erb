<div data-controller="meal-plans-new" class="max-w-3xl mx-auto mt-8 space-y-6">

  <h1 class="text-3xl font-bold">献立作成</h1>

  <!-- フィルターエリア -->
  <div class="card bg-base-100 shadow p-6 space-y-6">

    <!-- ジャンル -->
    <div>
      <p class="text-xs font-semibold text-gray-500 mb-2">ジャンル</p>
      <div id="genreFilters" class="flex gap-2 flex-wrap">
        <% MyMenu.genres.keys.each do |genre| %>
          <button
            class="btn btn-sm genre-filter-button <%= genre_button_class(genre) %>"
            data-genre="<%= genre %>"
            type="button">
            <%= MyMenu.genres_i18n[genre] %>
            <span
              id="count-<%= genre %>"
              class="ml-1 hidden text-xs font-bold bg-primary text-white rounded-full px-1.5">
            </span>
          </button>
        <% end %>

        <button
          class="btn btn-sm btn-primary genre-filter-button"
          data-genre="all"
          type="button">
          全部
        </button>
      </div>
    </div>

    <!-- タグ -->
    <div id="tagFilters" class="flex gap-2 flex-wrap">
      <% @tags.each do |tag| %>
        <button
          type="button"
          class="badge badge-outline hover:badge-primary cursor-pointer tag-filter-button"
          data-tag-id="<%= tag.id %>">
          <%= tag.name %>
        </button>
      <% end %>
    </div>

    <!-- 並び替え -->
    <div>
      <select id="sortSelect" class="select select-bordered w-full max-w-xs">
        <option value="">---</option>
        <option value="created_desc">登録日（新しい順）</option>
        <option value="last_cooked_desc">直近で作っていない順</option>
        <option value="title_asc">50音順</option>
      </select>
    </div>

  </div>

  <%= form_with url: confirm_meal_plans_path, method: :post, data: { turbo_frame: "modal" } do %>

    <!-- メニュー一覧 -->
    <div class="bg-[#faf0e6] p-8 rounded-2xl space-y-6">
      <div id="menuList" class="grid gap-4">
        <% @my_menus.each do |menu| %>
          <label
            class="flex gap-2 items-center menu-item"
            data-genre="<%= menu.genre %>"
            data-tags="<%= menu.tags.pluck(:id).join(',') %>"
            data-created="<%= menu.created_at.to_i %>"
            data-last-cooked="<%= menu.last_cooked_at ? menu.last_cooked_at.to_time.to_i : 0 %>"
            data-title="<%= menu.title %>">

            <%= check_box_tag "my_menu_ids[]", menu.id, false, class: "menu-checkbox" %>
            <span><%= menu.title %>（<%= menu.genre_i18n %>）</span>
          </label>
        <% end %>
      </div>
    </div>
  <div class="pt-6 flex justify-center gap-4">
    <%= submit_tag "確認", class: "btn btn-primary" %>

    <%= link_to home_path,
        class: "btn bg-white text-base-content border border-base-300 hover:bg-base-200" do %>
          ← ホーム
    <% end %>
  </div>
  <% end %>

  <%= turbo_frame_tag "modal" %>
</div>
